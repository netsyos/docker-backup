language: php
php:
- '7.0'
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: MaQmyDyvGESUxpiUhKwbZNjZZTnKlxvbEm0y7zt8RP1HX6PgsYfHnANEfJx77LS7Lu4eK/CTXWNVfOGOM/414sYnZmk97ghTE64VRKtp9YdIqLyRui0GVmg3VZLC4xOty2Es/6Poa15+gTEX2PmnC82KnJLXz6hUK84TzQy6p5U4X6aZTHTBRP2WaEFwdLpTJ2SmUNmxeeVpEHxQ3gNJgV2bqSvj2On5YDtv++zllVGf99WiV+Cii0USTQsv+N8Kg6BH7Jf/xfYK8kYJ+lmYQwfWu84l0wpSjYpH1LAm4jxq54poAhLGpOHImJONkWMt3qr1ox2adNoqjJZu+JIJLSOft0OHEEGBZRf9HdZ67ljoyWNm8D79kTP4v/huwG+Q+7saoL1QnV6he6e1D426o76kT8CkUs7Oy7fFTNQIPMjL5ui0l7RMh0RfJVQ5CmGHjCxKrre3bNJhfidI9BXLFY6L2150IaRdfCCKdEBBOvAcURHHR+/uoQ/nN7/HbJdD7656JaZpimD8w3wC+uaF1FPVxXVQErfOF5bRjaKKGQECy8//az9shf6nyGcfWzQHWn+llaAmd8kl/RX2G5p/VpoGwR60AYGAOg+WwL4jmshJ8yZ2iVUOXbxDmQ/k4DC8Roccm0cjt8Tm8+PIU2bQivAi/OwJmC3Zt/KRCUuMgrk=
  - secure: kK4GF5di6yqzXX6J8ViRn8Y8D3noT5xso98GsGsjdNv68R64hL463Nb4glx0KYaxeHYNtwoF6F3ELaGTNJ8t0y5aoyKLmO/YwrofO4xX2R1y5hx7wEsbV4/+YlZaHnCmxeaB0GkeidAsffaoeKf/DzFTYKTpjuVH0nWCdE389bKW2bYzO8U/5JdGhr8Y0Y7SXj9rNIMhKxATqAs9qtgkf1xgO3sD0Fiv3fXHWwxfCaobawL3GSjudUCHKOybfNgpygl7/iFB4EH5TC6yEibJ/S/E9Vlt1One4OTB/vLnz+agRz0Qh/DmjSKbjhBlEECyxFyRl+QSfoytf5YQ+gouVT4D0kf99kFHcfcRAkF7V8q3SeMjI+TMo4xvEo/nqwNaD0CCdK6/9TgSyhuoBede0NAAXZH74hpmX4jT0h7z/It5bDYpBAWCZBHP35HsSO1tCiKntFde79s1Ue822M4jBT4yOGKKqlgVzybpXYk71BRol49XQ3f3C/no579hfhiQky1s/GE5FkXncrPDL68voPNwgLu082e8O3Reuxfe6pytMn09OXXeZmUt3VRwTkZKRUQRwGRoO231v25heGdbc/ruAVShBiL19w6M29ro/QCKeFIUXAi1ls/L8jajn2/1Sg9Er9Ce/5thfh7i0UhxlCv1eXMCbsj3gWTFSDSkm4c=
  - secure: Yifqpf2t7o9U8UzkZ/oP8xHplfKBSo9+SUMxPqxHuSuPTv8kq5KXfqHQlij3xWlVPqV2DxNjy5xHoseXa5fBqtQMZyXhevOz516LsXN3zGWCUrWjba9XTfIZrnnTXxd8fb44K3YrjjYxrbbl8fYL6oQjVgkCG6q6/sCUS+SNTzfPMyoFLdxs+4+xHx1Pagf0abnvyN/3Y8cPNuPsLjqWD/Et80z4GTKH7ruu8UedtE/GiKV0TU1TBrVgib5ubGkAYqmZzxTQVHnbjDF+x4A0H/E5KhwSibf3iNligeTTKmNYolRrQejE0C4WxPzqyXVuakEuSveeVY270O7KbRUV0EB2bZuP0bsq5DbonSMu3r/St6AYnxGk+SZ6l6QZ43pYllRgD9DvaeDiQ9iR1WufoiugVa64m7/s727+mrcuLS7dNqhqlSQmXxgvXoDUGduKToIfFRxvm9EITjKDyDyBKr/A3wfxexBVXShojjhu7NeNTCSKoLzyVuiQR6dsyKSjzEbn2btj2O1Wl7BjBcQ78rwjI0IyPIUCtffvOI6W0BIDmndMzGnp9XG+KMyKYHzilA5JOb32kIPCQFTJTpJNX1LXTu1gYteXF/hbpTVCVYYMxOu188TyQHSVOSw/K1dSsLEH4t3oLAIRkIn2NUXTsEtEAassZfJbrUehJ18/7xo=
script:
- ls -alh
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/backup
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH;
  fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
notifications:
  slack:
    secure: jBa1Ul928p+dHbfTBZCqS2vov8owtno9+u46K0DmnjqmkJMeYW0xbgyD6cZL/ZLoixkBj/kxA0xXV6EehX/I13VhMVM/NJ/3iRhlUfOgZV/L8RnceCqyv70hmyZJU331/YKOfU/loP5W0igglv1WZtZFjcosyoWIEnuPhiYKHFhCRDt5Y3oJ2mShBvzf8VJuX25vLIB7ntpLVQ8X8ChzUOEeD8KdpEGx0IN6MtqS+lmpXkIw9Ur2UKaJ4wmVVMY3OlFguKS/7qYbLkLtJ/tTDfjfDJNwFP3k6BYXHehYmIZ/2cMqR9CtPY9Gabz5C1vcWoTiIX95lpEwZ/TUKrZTVwX46pm2PHiEhCFYQTBEiMEv2NsuSc6cR1y945jbbn8nbKK1toU3lZ7QR/BWtIY3IxoT0PeLPN8WY+pwL8tSUTSkzfKa+ZDKhwZlP2UmdYAfTO8zw7Go6WqUF7I6TtnsPi6mlJbT36dfz6rVdf2WaoWLqzNz6j6wZezqM09bxI63ypu0h0ifrPaDhlsgDhI3YZ9g3++NU1VdIl2ST6nuHJb1cgdlmkyebnnHGC7CZyc/H6MqiFGJVPq3Cyn9vNzHvWdsJ4SGSRZhIsUSC2fMSp1BoDgXn/nfzXRQVAuGnV6Ik6kISNQ24iMhKtfxNYWo+7aX6ME+eK5sTTqgpTjuyYQ=
